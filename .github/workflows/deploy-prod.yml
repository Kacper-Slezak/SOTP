# .github/workflows/deploy-prod.yml - Workflow wdroÅ¼enia na produkcjÄ™

name: CD - Production Deployment

on:
  push:
    tags:
      - 'v*' # Uruchom na kaÅ¼dy tag zaczynajÄ…cy siÄ™ od 'v', np. v1.0.0

jobs:
  deploy:
    name: ðŸš€ Deploy to Production
    runs-on: ubuntu-latest
    environment:
      name: production
      url: https://sotp.example.com # ZmieÅ„ na swÃ³j URL
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: SIMULATING Deployment via SSH
        run: |
          echo "Connecting to SOTP production server..."
          echo "Deploying version ${{ github.ref_name }}..."
          sleep 15
          echo "Deployment command completed successfully!"

  notify:
    name: ðŸ“¢ Notify on Status
    # runs-on: ubuntu-latest  <-- TÄ˜ LINIÄ˜ NALEÅ»Y USUNÄ„Ä†
    needs: deploy
    if: always()
    uses: ./.github/workflows/discord_notifier.yml
    with:
      status: ${{ needs.deploy.result }}
      environment: Production
      commit_sha: ${{ github.sha }}
      actor: ${{ github.actor }}
    secrets:
      webhook_url: ${{ secrets.DISCORD_WEBHOOK_URL }}