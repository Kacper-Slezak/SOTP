# .github/workflows/ci.yml - Główny workflow CI (Lint, Test, Build)

name: CI - Project Integration

on:
  push:
    branches:
      - main
      - develop

jobs:
  build_and_test:
    name: Build & Test
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Simulate build and tests
        run: echo "Building and testing in progress..."

  notify_on_push:
    name: Notify Commit on Discord
    # runs-on: ubuntu-latest  <-- TĘ LINIĘ NALEŻY USUNĄĆ
    needs: build_and_test
    if: success()
    uses: ./.github/workflows/discord_notifier.yml
    with:
      status: success
      environment: Commit to Main
      commit_sha: ${{ github.sha }}
      actor: ${{ github.actor }}
    secrets:
      webhook_url: ${{ secrets.DISCORD_WEBHOOK_URL }}